{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Sheet from \"./sheet\";\nimport Style from \"./style\";\nimport Value from \"./value\";\nimport vars from \"./replacers/vars\";\nimport mq from \"./replacers/media-queries\";\nimport child from \"./child\";\nvar BUILD_EVENT = 'build';\nvar EStyleSheet = function () {\n  function EStyleSheet() {\n    _classCallCheck(this, EStyleSheet);\n    this.child = child;\n    this.builded = false;\n    this.sheets = [];\n    this.globalVars = null;\n    this.listeners = {};\n    this._proxyToOriginal();\n  }\n  _createClass(EStyleSheet, [{\n    key: \"create\",\n    value: function create(obj) {\n      var sheet = new Sheet(obj);\n      this.sheets.push(sheet);\n      if (this.builded) {\n        sheet.calc(this.globalVars);\n      }\n      return sheet.getResult();\n    }\n  }, {\n    key: \"build\",\n    value: function build(rawGlobalVars) {\n      this.builded = true;\n      this._calcGlobalVars(rawGlobalVars);\n      this._calcSheets();\n      this._callListeners(BUILD_EVENT);\n    }\n  }, {\n    key: \"value\",\n    value: function value(expr, prop) {\n      var varsArr = this.globalVars ? [this.globalVars] : [];\n      return new Value(expr, prop, varsArr).calc();\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(event, listener) {\n      this._assertSubscriptionParams(event, listener);\n      this.listeners[BUILD_EVENT] = this.listeners[BUILD_EVENT] || [];\n      this.listeners[BUILD_EVENT].push(listener);\n      if (this.builded) {\n        listener();\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(event, listener) {\n      this._assertSubscriptionParams(event, listener);\n      if (this.listeners[BUILD_EVENT]) {\n        this.listeners[BUILD_EVENT] = this.listeners[BUILD_EVENT].filter(function (item) {\n          return item !== listener;\n        });\n      }\n    }\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      this.sheets.forEach(function (sheet) {\n        return sheet.clearCache();\n      });\n    }\n  }, {\n    key: \"_calcGlobalVars\",\n    value: function _calcGlobalVars(rawGlobalVars) {\n      if (rawGlobalVars) {\n        this._checkGlobalVars(rawGlobalVars);\n        rawGlobalVars.$theme = rawGlobalVars.$theme || 'default';\n        this.globalVars = new Style(rawGlobalVars, [rawGlobalVars]).calc().calculatedVars;\n      }\n    }\n  }, {\n    key: \"_calcSheets\",\n    value: function _calcSheets() {\n      var _this = this;\n      this.sheets.forEach(function (sheet) {\n        return sheet.calc(_this.globalVars);\n      });\n    }\n  }, {\n    key: \"_callListeners\",\n    value: function _callListeners(event) {\n      if (Array.isArray(this.listeners[event])) {\n        this.listeners[event].forEach(function (listener) {\n          return listener();\n        });\n      }\n    }\n  }, {\n    key: \"_proxyToOriginal\",\n    value: function _proxyToOriginal() {\n      var _this2 = this;\n      var props = ['setStyleAttributePreprocessor', 'hairlineWidth', 'absoluteFill', 'absoluteFillObject', 'flatten'];\n      props.forEach(function (prop) {\n        Object.defineProperty(_this2, prop, {\n          get: function get() {\n            return StyleSheet[prop];\n          },\n          enumerable: true\n        });\n      });\n    }\n  }, {\n    key: \"_checkGlobalVars\",\n    value: function _checkGlobalVars(rawGlobalVars) {\n      Object.keys(rawGlobalVars).forEach(function (key) {\n        if (!vars.isVar(key) && !mq.isMediaQuery(key)) {\n          throw new Error(`EStyleSheet.build() params should contain global variables (start with $) ` + `or media queries (start with @media). Got '${key}'.`);\n        }\n      });\n    }\n  }, {\n    key: \"_assertSubscriptionParams\",\n    value: function _assertSubscriptionParams(event, listener) {\n      if (event !== BUILD_EVENT) {\n        throw new Error(`Only '${BUILD_EVENT}' event is currently supported.`);\n      }\n      if (typeof listener !== 'function') {\n        throw new Error('Listener should be a function.');\n      }\n    }\n  }]);\n  return EStyleSheet;\n}();\nexport { EStyleSheet as default };","map":{"version":3,"names":["Sheet","Style","Value","vars","mq","child","BUILD_EVENT","EStyleSheet","_classCallCheck","builded","sheets","globalVars","listeners","_proxyToOriginal","_createClass","key","value","create","obj","sheet","push","calc","getResult","build","rawGlobalVars","_calcGlobalVars","_calcSheets","_callListeners","expr","prop","varsArr","subscribe","event","listener","_assertSubscriptionParams","unsubscribe","filter","item","clearCache","forEach","_checkGlobalVars","$theme","calculatedVars","_this","Array","isArray","_this2","props","Object","defineProperty","get","StyleSheet","enumerable","keys","isVar","isMediaQuery","Error","default"],"sources":["/Users/landroide/Desktop/ReactNative/Pros/WithExpo/Demo-project/node_modules/react-native-extended-stylesheet/src/api.js"],"sourcesContent":["/**\n * Extended StyleSheet API\n */\n\nimport {StyleSheet} from 'react-native';\nimport Sheet from './sheet';\nimport Style from './style';\nimport Value from './value';\nimport vars from './replacers/vars';\nimport mq from './replacers/media-queries';\nimport child from './child';\n\nconst BUILD_EVENT = 'build';\n\nexport default class EStyleSheet {\n  /**\n   * Constructor\n   */\n  constructor() {\n    this.child = child;\n    this.builded = false;\n    this.sheets = [];\n    this.globalVars = null;\n    this.listeners = {};\n    this._proxyToOriginal();\n  }\n\n  /**\n   * Creates stylesheet that will be calculated after build\n   * @param {Object} obj\n   * @returns {Object}\n   */\n  create(obj) {\n    const sheet = new Sheet(obj);\n    // todo: add options param to allow create dynamic stylesheets that should not be stored\n    this.sheets.push(sheet);\n    if (this.builded) {\n      sheet.calc(this.globalVars);\n    }\n    return sheet.getResult();\n  }\n\n  /**\n   * Builds all created stylesheets with passed variables\n   * @param {Object} [rawGlobalVars]\n   */\n  build(rawGlobalVars) {\n    this.builded = true;\n    this._calcGlobalVars(rawGlobalVars);\n    this._calcSheets();\n    this._callListeners(BUILD_EVENT);\n  }\n\n  /**\n   * Calculates particular value. For some values you need to pass prop (e.g. percent)\n   * @param {*} expr\n   * @param {String} [prop]\n   * @returns {*}\n   */\n  value(expr, prop) {\n    let varsArr = this.globalVars ? [this.globalVars] : [];\n    return new Value(expr, prop, varsArr).calc();\n  }\n\n  /**\n   * Subscribe to event. Currently only 'build' event is supported.\n   * @param {String} event\n   * @param {Function} listener\n   */\n  subscribe(event, listener) {\n    this._assertSubscriptionParams(event, listener);\n    this.listeners[BUILD_EVENT] = this.listeners[BUILD_EVENT] || [];\n    this.listeners[BUILD_EVENT].push(listener);\n    if (this.builded) {\n      listener();\n    }\n  }\n\n  /**\n   * Unsubscribe from event. Currently only 'build' event is supported.\n   * @param {String} event\n   * @param {Function} listener\n   */\n  unsubscribe(event, listener) {\n    this._assertSubscriptionParams(event, listener);\n    if (this.listeners[BUILD_EVENT]) {\n      this.listeners[BUILD_EVENT] = this.listeners[BUILD_EVENT].filter(item => item !== listener);\n    }\n  }\n\n  /**\n   * Clears all cached styles.\n   */\n  clearCache() {\n    this.sheets.forEach(sheet => sheet.clearCache());\n  }\n\n  // todo: move global vars stuff to separate module\n  _calcGlobalVars(rawGlobalVars) {\n    if (rawGlobalVars) {\n      this._checkGlobalVars(rawGlobalVars);\n      // $theme is system variable used for caching\n      rawGlobalVars.$theme = rawGlobalVars.$theme || 'default';\n      this.globalVars = new Style(rawGlobalVars, [rawGlobalVars]).calc().calculatedVars;\n    }\n  }\n\n  _calcSheets() {\n    this.sheets.forEach(sheet => sheet.calc(this.globalVars));\n  }\n\n  _callListeners(event) {\n    if (Array.isArray(this.listeners[event])) {\n      this.listeners[event].forEach(listener => listener());\n    }\n  }\n\n  _proxyToOriginal() {\n    // see: https://facebook.github.io/react-native/docs/stylesheet.html\n    const props = [\n      'setStyleAttributePreprocessor',\n      'hairlineWidth',\n      'absoluteFill',\n      'absoluteFillObject',\n      'flatten',\n    ];\n    props.forEach(prop => {\n      Object.defineProperty(this, prop, {\n        get: () => StyleSheet[prop],\n        enumerable: true,\n      });\n    });\n  }\n\n  _checkGlobalVars(rawGlobalVars) {\n    Object.keys(rawGlobalVars).forEach(key => {\n      if (!vars.isVar(key) && !mq.isMediaQuery(key)) {\n        throw new Error(\n          `EStyleSheet.build() params should contain global variables (start with $) ` +\n          `or media queries (start with @media). Got '${key}'.`\n        );\n      }\n    });\n  }\n\n  _assertSubscriptionParams(event, listener) {\n    if (event !== BUILD_EVENT) {\n      throw new Error(`Only '${BUILD_EVENT}' event is currently supported.`);\n    }\n    if (typeof listener !== 'function') {\n      throw new Error('Listener should be a function.');\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}