{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Style from \"./style\";\nimport utils from \"./utils\";\nimport vars from \"./replacers/vars\";\nimport mediaQueries from \"./replacers/media-queries\";\nvar _default = function () {\n  function _default(source) {\n    _classCallCheck(this, _default);\n    this.source = source;\n    this.result = {};\n    this.cache = new Map();\n    this.nativeSheet = {};\n    this.globalVars = null;\n    this.localVars = null;\n    this.allVars = null;\n    this.processedSource = null;\n  }\n  _createClass(_default, [{\n    key: \"calc\",\n    value: function calc(globalVars) {\n      this.globalVars = globalVars;\n      this.clearResult();\n      if (this.hasCache()) {\n        this.applyCache();\n      } else {\n        this.processMediaQueries();\n        this.calcVars();\n        this.calcStyles();\n        this.calcNative();\n        this.storeCache();\n      }\n      return this.getResult();\n    }\n  }, {\n    key: \"processMediaQueries\",\n    value: function processMediaQueries() {\n      this.processedSource = mediaQueries.process(this.source);\n    }\n  }, {\n    key: \"calcVars\",\n    value: function calcVars() {\n      var rawLocalVars = vars.extract(this.processedSource);\n      if (rawLocalVars) {\n        this.localVars = new Style(rawLocalVars, [rawLocalVars, this.globalVars]).calc().calculatedVars;\n        Object.assign(this.result, this.localVars);\n      } else {\n        this.localVars = null;\n      }\n      this.allVars = [this.localVars, this.globalVars].filter(Boolean);\n    }\n  }, {\n    key: \"calcStyles\",\n    value: function calcStyles() {\n      var _this = this;\n      var extractedStyles = utils.excludeKeys(this.processedSource, this.localVars);\n      Object.keys(extractedStyles).forEach(function (key) {\n        var styles = extractedStyles[key];\n        if (typeof styles === 'function') {\n          styles = styles();\n        }\n        if (styles && typeof styles === 'object') {\n          _this.calcStyle(key, styles);\n        } else {\n          _this.result[key] = styles;\n        }\n      });\n    }\n  }, {\n    key: \"calcStyle\",\n    value: function calcStyle(key, styleProps) {\n      var style = new Style(styleProps, this.allVars);\n      var _style$calc = style.calc(),\n        calculatedProps = _style$calc.calculatedProps,\n        calculatedVars = _style$calc.calculatedVars;\n      var merged = Object.assign({}, calculatedVars, calculatedProps);\n      if (key.charAt(0) === '_') {\n        this.result[key] = merged;\n      } else {\n        this.result['_' + key] = merged;\n        this.nativeSheet[key] = calculatedProps;\n      }\n    }\n  }, {\n    key: \"calcNative\",\n    value: function calcNative() {\n      if (Object.keys(this.nativeSheet).length) {\n        var rnStyleSheet = StyleSheet.create(this.nativeSheet);\n        Object.assign(this.result, rnStyleSheet);\n      }\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      return this.result;\n    }\n  }, {\n    key: \"clearResult\",\n    value: function clearResult() {\n      var _this2 = this;\n      Object.keys(this.result).forEach(function (key) {\n        return delete _this2.result[key];\n      });\n    }\n  }, {\n    key: \"hasCache\",\n    value: function hasCache() {\n      var key = this.getCacheKey();\n      return key && this.cache.has(key);\n    }\n  }, {\n    key: \"applyCache\",\n    value: function applyCache() {\n      var cachedResult = this.cache.get(this.getCacheKey());\n      Object.assign(this.result, cachedResult);\n    }\n  }, {\n    key: \"storeCache\",\n    value: function storeCache() {\n      var key = this.getCacheKey();\n      if (key) {\n        this.cache.set(key, Object.assign({}, this.result));\n      }\n    }\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      this.cache.clear();\n    }\n  }, {\n    key: \"getCacheKey\",\n    value: function getCacheKey() {\n      return this.globalVars && this.globalVars.$theme;\n    }\n  }]);\n  return _default;\n}();\nexport { _default as default };","map":{"version":3,"names":["Style","utils","vars","mediaQueries","_default","source","_classCallCheck","result","cache","Map","nativeSheet","globalVars","localVars","allVars","processedSource","_createClass","key","value","calc","clearResult","hasCache","applyCache","processMediaQueries","calcVars","calcStyles","calcNative","storeCache","getResult","process","rawLocalVars","extract","calculatedVars","Object","assign","filter","Boolean","_this","extractedStyles","excludeKeys","keys","forEach","styles","calcStyle","styleProps","style","_style$calc","calculatedProps","merged","charAt","length","rnStyleSheet","StyleSheet","create","_this2","getCacheKey","has","cachedResult","get","set","clearCache","clear","$theme","default"],"sources":["/Users/landroide/Desktop/ReactNative/Pros/WithExpo/Demo-project/node_modules/react-native-extended-stylesheet/src/sheet.js"],"sourcesContent":["import {StyleSheet} from 'react-native';\nimport Style from './style';\nimport utils from './utils';\nimport vars from './replacers/vars';\nimport mediaQueries from './replacers/media-queries';\n\nexport default class {\n  /**\n   * Constructor\n   * @param {Object} source\n   */\n  constructor(source) {\n    this.source = source;\n    this.result = {};\n    this.cache = new Map(); // cache result for each theme\n    this.nativeSheet = {};\n    this.globalVars = null;\n    this.localVars = null;\n    this.allVars = null;\n    this.processedSource = null;\n  }\n\n  /**\n   * Calculates sheet and update result\n   * @param {Object} globalVars\n   */\n  calc(globalVars) {\n    this.globalVars = globalVars;\n    this.clearResult();\n    if (this.hasCache()) {\n      this.applyCache();\n    } else {\n      this.processMediaQueries();\n      this.calcVars();\n      this.calcStyles();\n      this.calcNative();\n      this.storeCache();\n    }\n    return this.getResult();\n  }\n\n  processMediaQueries() {\n    this.processedSource = mediaQueries.process(this.source);\n  }\n\n  calcVars() {\n    const rawLocalVars = vars.extract(this.processedSource);\n    if (rawLocalVars) {\n      this.localVars = new Style(rawLocalVars, [rawLocalVars, this.globalVars]).calc().calculatedVars;\n      Object.assign(this.result, this.localVars);\n    } else {\n      this.localVars = null;\n    }\n    this.allVars = [this.localVars, this.globalVars].filter(Boolean);\n  }\n\n  calcStyles() {\n    const extractedStyles = utils.excludeKeys(this.processedSource, this.localVars);\n    Object.keys(extractedStyles).forEach(key => {\n      let styles = extractedStyles[key];\n      if (typeof styles === 'function') {\n        styles = styles();\n      }\n      if (styles && typeof styles === 'object') {\n        this.calcStyle(key, styles);\n      } else {\n        // copy primitive values to result as-is\n        this.result[key] = styles;\n      }\n    });\n  }\n\n  calcStyle(key, styleProps) {\n    const style = new Style(styleProps, this.allVars);\n    const {calculatedProps, calculatedVars} = style.calc();\n    const merged = Object.assign({}, calculatedVars, calculatedProps);\n    if (key.charAt(0) === '_') {\n      this.result[key] = merged;\n    } else {\n      this.result['_' + key] = merged;\n      this.nativeSheet[key] = calculatedProps;\n    }\n  }\n\n  calcNative() {\n    if (Object.keys(this.nativeSheet).length) {\n      const rnStyleSheet = StyleSheet.create(this.nativeSheet);\n      Object.assign(this.result, rnStyleSheet);\n    }\n  }\n\n  getResult() {\n    return this.result;\n  }\n\n  clearResult() {\n    Object.keys(this.result).forEach(key => delete this.result[key]);\n  }\n\n  hasCache() {\n    const key = this.getCacheKey();\n    return key && this.cache.has(key);\n  }\n\n  applyCache() {\n    const cachedResult = this.cache.get(this.getCacheKey());\n    Object.assign(this.result, cachedResult);\n  }\n\n  storeCache() {\n    const key = this.getCacheKey();\n    if (key) {\n      this.cache.set(key, Object.assign({}, this.result));\n    }\n  }\n\n  clearCache() {\n    this.cache.clear();\n  }\n\n  getCacheKey() {\n    return this.globalVars && this.globalVars.$theme;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}